var requirejs,require,define;!function(e){function t(e,t){return v.call(e,t)}function r(e,t){var r,n,i,o,a,s,u,c,l,f,d,p=t&&t.split("/"),h=m.map,g=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(p=p.slice(0,p.length-1),e=e.split("/"),a=e.length-1,m.nodeIdCompat&&y.test(e[a])&&(e[a]=e[a].replace(y,"")),e=p.concat(e),l=0;l<e.length;l+=1)if(d=e[l],"."===d)e.splice(l,1),l-=1;else if(".."===d){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||g)&&h){for(r=e.split("/"),l=r.length;l>0;l-=1){if(n=r.slice(0,l).join("/"),p)for(f=p.length;f>0;f-=1)if(i=h[p.slice(0,f).join("/")],i&&(i=i[n])){o=i,s=l;break}if(o)break;!u&&g&&g[n]&&(u=g[n],c=l)}!o&&u&&(o=u,s=c),o&&(r.splice(0,s,o),e=r.join("/"))}return e}function n(t,r){return function(){return l.apply(e,b.call(arguments,0).concat([t,r]))}}function i(e){return function(t){return r(t,e)}}function o(e){return function(t){p[e]=t}}function a(r){if(t(h,r)){var n=h[r];delete h[r],g[r]=!0,c.apply(e,n)}if(!t(p,r)&&!t(g,r))throw new Error("No "+r);return p[r]}function s(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function u(e){return function(){return m&&m.config&&m.config[e]||{}}}var c,l,f,d,p={},h={},m={},g={},v=Object.prototype.hasOwnProperty,b=[].slice,y=/\.js$/;f=function(e,t){var n,o=s(e),u=o[0];return e=o[1],u&&(u=r(u,t),n=a(u)),u?e=n&&n.normalize?n.normalize(e,i(t)):r(e,t):(e=r(e,t),o=s(e),u=o[0],e=o[1],u&&(n=a(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:n}},d={require:function(e){return n(e)},exports:function(e){var t=p[e];return"undefined"!=typeof t?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:u(e)}}},c=function(r,i,s,u){var c,l,m,v,b,y,k=[],w=typeof s;if(u=u||r,"undefined"===w||"function"===w){for(i=!i.length&&s.length?["require","exports","module"]:i,b=0;b<i.length;b+=1)if(v=f(i[b],u),l=v.f,"require"===l)k[b]=d.require(r);else if("exports"===l)k[b]=d.exports(r),y=!0;else if("module"===l)c=k[b]=d.module(r);else if(t(p,l)||t(h,l)||t(g,l))k[b]=a(l);else{if(!v.p)throw new Error(r+" missing "+l);v.p.load(v.n,n(u,!0),o(l),{}),k[b]=p[l]}m=s?s.apply(p[r],k):void 0,r&&(c&&c.exports!==e&&c.exports!==p[r]?p[r]=c.exports:m===e&&y||(p[r]=m))}else r&&(p[r]=s)},requirejs=require=l=function(t,r,n,i,o){if("string"==typeof t)return d[t]?d[t](r):a(f(t,r).f);if(!t.splice){if(m=t,m.deps&&l(m.deps,m.callback),!r)return;r.splice?(t=r,r=n,n=null):t=e}return r=r||function(){},"function"==typeof n&&(n=i,i=o),i?c(e,t,r,n):setTimeout(function(){c(e,t,r,n)},4),l},l.config=function(e){return l(e)},requirejs._defined=p,define=function(e,r,n){r.splice||(n=r,r=[]),t(p,e)||t(h,e)||(h[e]=[e,r,n])},define.amd={jQuery:!0}}(),define("almond",function(){}),require.config({paths:{almond:"../../bower_components/almond/almond",lodash:"../../bower_components/lodash/dist/lodash",underscore:"../../bower_components/underscore/underscore",jquery:"../../bower_components/jquery/dist/jquery",Backbone:"../../bower_components/backbone/backbone"},shim:{jquery:{exports:"$"},lodash:{deps:["underscore.string"]},Backbone:{deps:["jquery","lodash"],exports:"Backbone"}}}),define("config",function(){}),define("lib/evt",[],function(){var e={bind:function(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)},unbind:function(e){e.type=null}};return e}),define("xmlParse",[],function(){var e,t=new XMLHttpRequest,r={loadXML:function(r,n){t.open("GET",n,!1),t.send(),e=t.responseXML,this.parseXML(r)},parseXML:function(t){for(var r=e.getElementsByTagName("characters")[0],n=0;n<r.childNodes.length;n++){var i=r.getElementsByTagName("character")[n];t.add(i)}}};return r}),define("display",[],function(){var e={setTeams:function(e,t){var r="",n="";window.console.log(e);for(var i=0;i<e.length;i++){r+=i===t?"<th>Draftable</th>":"<th>Team "+(i+1)+"</th>",n+="<td>";for(var o=0;o<e[i].length;o++)n+=e[i][o].id+": "+e[i][o].name+": "+e[i][o].title+"<br>";n+="</td>"}var a=document.getElementById("header"),s=document.getElementById("teams");a.innerHTML=r,s.innerHTML=n},hideForm:function(){var e=document.getElementById("fForm");e.style.display="none"},showForm:function(){var e=document.getElementById("fForm");e.style.display="block"},hideTeams:function(){var e=document.getElementById("tOutput");e.style.display="none"},showTeams:function(){var e=document.getElementById("tOutput");e.style.display="block"},resetForm:function(){this.showForm(),this.hideTeams()}};return e}),define("randomizer",["display"],function(e){var t={randomize:function(t,r,n,i,o){window.console.log("randomizing results");var a;switch(i){case"standard":a=this.draftStandard(t,r,n,o);break;case"pure":a=this.draftPure(t,r,n);break;case"draft":a=this.draftDraft(t,r,n,o)}e.setTeams(a,r),e.hideForm(),e.showTeams()},draftStandard:function(e,t,r,n){for(var i,o=[],a=0;t>a;a++)o.push([]);for(var s=0;s<Number(r)+Number(n);s++)for(var u=0;t>u;u++)i=e.splice(Math.round(Math.random()*e.length-1),1),o[u].push(i[0]);return o},draftPure:function(e,t,r){for(var n,i=[],o=0;t>o;o++)i.push([]);for(var a=0;r>a;a++)for(var s=0;t>s;s++)n=e.splice(Math.round(Math.random()*e.length-1),1),i[s].push(n[0]);return i},draftDraft:function(e,t,r,n){for(var i,o=[],a=0;t>=a;a++)o.push([]);for(var s=0;s<Number(r)/2;s++)for(var u=0;t>u;u++)i=e.splice(Math.round(Math.random()*e.length-1),1),o[u].push(i[0]);for(s=0;s<Number(r)/2*Number(t)+Number(n);s++)i=e.splice(Math.round(Math.random()*e.length),1),o[t].push(i[0]);return o}};return t}),define("filter",[],function(){var e={filterList:function(e,t,r,n,i,o){window.console.log("filtering list");var a=e;return a=this.applyFilter(a,"set",t),a=this.applyFilter(a,"age",r),a=this.applyFilter(a,"setting",n),a=this.applyFilter(a,"circle",i),a=this.applyFilter(a,"nature",o)},applyFilter:function(e,t,r){for(var n,i=[],o=0;o<e.length;o++){n=!0;for(var a=0;a<r.length;a++)if(e[o][t]===r[a]){n=!1;break}n||i.push(e[o])}return i}};return e}),define("processForm",["randomizer","filter"],function(e,t){var r,n,i,o,a,s,u,c,l,f={processForm:function(f,d){var p=d.target.form;window.console.log("processed form"),r=p.numTeams.value,n=p.numChars.value,i=p.draft.value,o=p.numXChars.value,a=[];for(var h=0;h<p.set.length;h++)p.set[h].checked&&a.push(p.set[h].value);for(s=[],h=0;h<p.age.length;h++)p.age[h].checked&&s.push(p.age[h].value);for(u=[],h=0;h<p.setting.length;h++)p.setting[h].checked&&u.push(p.setting[h].value);for(c=[],h=0;h<p.circle.length;h++)p.circle[h].checked&&c.push(p.circle[h].value);for(l=[],h=0;h<p.nature.length;h++)p.nature[h].checked&&l.push(p.nature[h].value);var m=t.filterList(f.get(),a,s,u,c,l);e.randomize(m,r,n,i,o)},checkClicked:function(e){var t,r=e.target,n=e.target.form;if("setting"===r.name)for(t=0;t<n.age.length;t++)n.age[t].id.substr(1,1)===r.id.substr(1,1)&&(n.age[t].checked=!0);else if("age"===r.name)for(t=0;t<n.setting.length;t++)n.setting[t].id.substr(1,1)===r.id.substr(1,1)&&(n.setting[t].checked=!1)},checkDraft:function(e){var t=e.target;t.form.numXChars.disabled="pure"===t.value?!0:!1}};return f}),define("character",[],function(){var e=function(e){"undefined"!=typeof e&&(this.id=e.getAttribute("id"),this.set=e.getAttribute("set"),this.name=e.getAttribute("name"),this.title=e.getAttribute("title"),this.age=e.getAttribute("age"),this.setting=e.getAttribute("setting"),this.circle=e.getAttribute("circle"),this.nature=e.getAttribute("nature"),this.stats=e.getAttribute("stats").split(","),window.console.log("Character created"))};return e.prototype.id="",e.prototype.set="",e.prototype.name="",e.prototype.title="",e.prototype.age="",e.prototype.setting="",e.prototype.circle="",e.prototype.nature="",e.prototype.stats=[],e}),define("character_collection",["character"],function(e){var t=function(e){void 0===e&&(e=[]),this.init.call(this,e)};return t.prototype.list=[],t.prototype.init=function(e){for(var t=0;t<e.length;t++)this.add(e)},t.prototype.add=function(t){var r=new e(t);this.list.push(r)},t.prototype.get=function(e){return this.list[e]},t.prototype.get=function(){return this.list},t}),require(["config"],function(){require(["lib/evt","xmlParse","processForm","character_collection","display"],function(e,t,r,n,i){var o=new n;t.loadXML(o,"doa2_character_db.xml");var a=document.getElementById("draft_type");e.bind(a,"change",r.checkDraft);for(var s=document.getElementsByClassName("setting-checkbox"),u=0;u<s.length;u++)e.bind(s[u],"click",r.checkClicked);var c=document.getElementById("submit_form");e.bind(c,"click",r.processForm.bind(this,o));var l=document.getElementById("reset_button");e.bind(l,"click",i.resetForm.bind(i))})}),define("main",function(){}),require(["main"]);
//# sourceMappingURL=main.min.js.map